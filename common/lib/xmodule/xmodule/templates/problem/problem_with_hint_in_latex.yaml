---
metadata:
    display_name: Задача с динамической подсказкой с использованием Latex
    source_code: |
        \subsection{Задача с динамической подсказкой}

        % Динамические подсказки — это сообщения, которые выводятся
        % в зависимости от того, что ввел слушатель. Эти подсказки генерируются с помощью кода,
        % написанного на Python.
        %
        % Ниже представлен пример с использованием. Эта задача может быть написана непосредственно на XML.

        Это задание демонстрирует вопрос с подсказками, которые основываются на методе
        {\tt hintfn}.

        \begin{edXscript}
        def test_str(expect, ans):
          print expect, ans
          ans = ans.strip("'")
          ans = ans.strip('"')
          return expect == ans.lower()

        def hint_fn(answer_ids, student_answers, new_cmap, old_cmap):
          aid = answer_ids[0]
          ans = str(student_answers[aid]).lower()
          print 'hint_fn called, ans=', ans
          hint = ''
          if 'java' in ans:
             hint = 'хорош только для питья'
          elif 'perl' in ans:
             hint = 'не так богат'
          elif 'pascal' in ans:
             hint = 'это язык для битников'
          elif 'fortran' in ans:
             hint = 'его времена уже прошли'
          elif 'clu' in ans:
             hint = 'придется быть инвариантным'
          if hint:
            hint = "<font color='blue'>Подсказка: {0}</font>".format(hint)
            new_cmap.set_hint_and_mode(aid,hint,'always')
        \end{edXscript}

        Какой из современных языков программирования наилучший?

        \edXabox{type="custom" cfn='test_str' expect='python' hintfn='hint_fn'}
    markdown: !!null
data: |
        <problem>
          <text>
            <h4>Задача с динамической подсказкой с использованием Latex</h4>
            <p>
                Это задание демонстрирует вопрос с подсказками, которые основываются на методе <tt class="tt">hintfn</tt>.
            </p>
            <script type="text/python" system_path="python_lib">
              def test_str(expect, ans):
                print expect, ans
                ans = ans.strip("'")
                ans = ans.strip('"')
                return expect == ans.lower()

              def hint_fn(answer_ids, student_answers, new_cmap, old_cmap):
                aid = answer_ids[0]
                ans = str(student_answers[aid]).lower()
                print 'hint_fn called, ans=', ans
                hint = ''
                if 'java' in ans:
                  hint = 'хорош только для питья'
                elif 'perl' in ans:
                  hint = 'не так богат'
                elif 'pascal' in ans:
                  hint = 'это язык для битников'
                elif 'fortran' in ans:
                  hint = 'его времена уже прошли'
                elif 'clu' in ans:
                  hint = 'придется быть инвариантным'
                if hint:
                  hint = "&lt;font color='blue'&gt;Подсказка: {0}&lt;/font&gt;".format(hint)
                new_cmap.set_hint_and_mode(aid,hint,'always')
            </script>
            <label>
              Какой из современных языков программирования наилучший?
              <customresponse cfn="test_str" expect="python">
                <textline correct_answer="python"/>
                <hintgroup hintfn="hint_fn"/>
              </customresponse>
            </label>
          </text>
        </problem>
